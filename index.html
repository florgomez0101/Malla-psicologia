<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Malla Curricular Psicología</title>
<style>
:root {
  --color-libre: #ccc;
  --color-cursando: #ffeb3b;
  --color-regular: #4caf50;
  --color-finalizada: #2196f3;
}
body {
  font-family: Arial, sans-serif;
  background: #f4f4f4;
  padding: 20px;
}
h1, h2 {
  text-align: center;
}
.controles {
  text-align: center;
  margin-bottom: 20px;
}
.controles label {
  margin: 0 10px;
}
.malla {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 15px;
}
.año {
  background: white;
  border-radius: 8px;
  padding: 10px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
.año h2 {
  font-size: 1.2em;
  margin-bottom: 8px;
}
.materia {
  margin: 5px 0;
  padding: 8px;
  border-radius: 5px;
  cursor: pointer;
  transition: background 0.3s;
}
.bloqueada {
  filter: grayscale(100%) opacity(0.5);
  pointer-events: none;
}
</style>
</head>
<body>
<h1>Malla Curricular – Lic. en Psicología</h1>
<div class="controles">
  <label>Libre <input type="color" id="color-libre" value="#ccc"></label>
  <label>Cursando <input type="color" id="color-cursando" value="#ffeb3b"></label>
  <label>Regular <input type="color" id="color-regular" value="#4caf50"></label>
  <label>Finalizada <input type="color" id="color-finalizada" value="#2196f3"></label>
  <button onclick="guardarColores()">Guardar Colores</button>
</div>
<div class="malla">
  <!-- AÑO 1 -->
  <div class="año">
    <h2>1º Año</h2>
    <div class="materia" data-id="filosofia1">Filosofía I</div>
    <div class="materia" data-id="historiaPsico">Historia de la Psicología</div>
    <div class="materia" data-id="metodologia1">Metodología de la Investigación en Psicología I</div>
    <div class="materia" data-id="neuro">Neuropsicología</div>
    <div class="materia" data-id="psicologiaGeneral">Psicología General</div>
    <div class="materia" data-id="historiaSocio">Historia del Pensamiento Sociopolítico</div>
    <div class="materia" data-id="antropologia" data-correlativas="historiaSocio">Antropología Cultural</div>
    <div class="materia" data-id="linguistica">Lingüística</div>
  </div>
  <!-- AÑO 2 -->
  <div class="año">
    <h2>2º Año</h2>
    <div class="materia" data-id="estadistica">Estadística</div>
    <div class="materia" data-id="evolutivaNino" data-correlativas="psicologiaGeneral">Psicología Evolutiva (Niñez y Adolescencia)</div>
    <div class="materia" data-id="profunda" data-correlativas="psicologiaGeneral">Psicología Profunda</div>
    <div class="materia" data-id="teologia1" data-correlativas="filosofia1">Teología I</div>
    <div class="materia" data-id="filosofia2" data-correlativas="filosofia1">Filosofía II</div>
    <div class="materia" data-id="psicolinguistica" data-correlativas="linguistica">Psicolingüística</div>
    <div class="materia" data-id="sociologia" data-correlativas="historiaPsico">Sociología</div>
    <div class="materia" data-id="antropoFilo" data-correlativas="filosofia1,filosofia2">Antropología Filosófica</div>
    <div class="materia" data-id="introPsico" data-correlativas="psicologiaGeneral,neuro">Introducción al Psicodiagnóstico</div>
    <div class="materia" data-id="personalidad" data-correlativas="psicologiaGeneral">Psicología de la Personalidad</div>
    <div class="materia" data-id="experimental" data-correlativas="psicologiaGeneral,metodologia1">Psicología Experimental</div>
  </div>
  <!-- AÑO 3 -->
  <div class="año">
    <h2>3º Año</h2>
    <div class="materia" data-id="educacional" data-correlativas="historiaPsico,psicologiaGeneral,neuro,metodologia1,evolutivaNino">Psicología Educacional</div>
    <div class="materia" data-id="deporte" data-correlativas="psicologiaGeneral,neuro,sociologia,evolutivaNino">Psicología del Deporte</div>
    <div class="materia" data-id="evolutivaAdulto" data-correlativas="antropologia,psicologiaGeneral,evolutivaNino">Psicología Evolutiva Adultez y Senectud</div>
    <div class="materia" data-id="social" data-correlativas="historiaPsico,antropologia,sociologia,evolutivaNino">Psicología Social</div>
    <div class="materia" data-id="psicometria" data-correlativas="metodologia1,estadistica">Psicometría</div>
    <div class="materia" data-id="psicopatoInf" data-correlativas="psicologiaGeneral,neuro,evolutivaNino,personalidad">Psicopatología Infanto Juvenil</div>
    <div class="materia" data-id="teologia2" data-correlativas="teologia1">Teología II</div>
    <div class="materia" data-id="grupo" data-correlativas="historiaPsico,social,personalidad">Dinámica de Grupo</div>
    <div class="materia" data-id="psicopatoAdulto" data-correlativas="psicopatoInf">Psicopatología del Adulto</div>
    <div class="materia" data-id="seminario1" data-correlativas="psicologiaGeneral,social,profunda,psicolinguistica">Seminario I</div>
    <div class="materia" data-id="proj1" data-correlativas="psicologiaGeneral,psicometria,evolutivaNino,evolutivaAdulto">Técnicas Proyectivas I</div>
  </div>
  <!-- AÑO 4 -->
  <div class="año">
    <h2>4º Año</h2>
    <div class="materia" data-id="laboral" data-correlativas="psicometria,social,grupo,proj1">Psicología Laboral</div>
    <div class="materia" data-id="doctrina" data-correlativas="teologia2">Doctrina Social</div>
    <div class="materia" data-id="orientacion" data-correlativas="experimental,psicometria,evolutivaAdulto,proj1,educacional">Orientación Vocacional y Profesional</div>
    <div class="materia" data-id="diversidad" data-correlativas="psicopatoAdulto">Psicología Especial y de la Diversidad</div>
    <div class="materia" data-id="seminario2" data-correlativas="psicopatoAdulto,evolutivaAdulto">Seminario II</div>
    <div class="materia" data-id="proj2" data-correlativas="proj1">Técnicas Proyectivas II</div>
    <div class="materia" data-id="drogas" data-correlativas="psicopatoAdulto,social,evolutivaAdulto,educacional">Drogodependencia y Abordajes</div>
    <div class="materia" data-id="psicodiagnostico" data-correlativas="introPsico,evolutivaNino,profunda,personalidad,psicometria,evolutivaAdulto,proj1,proj2">Psicodiagnóstico</div>
    <div class="materia" data-id="clinica1" data-correlativas="psicopatoAdulto">Psicología Clínica I</div>
    <div class="materia" data-id="comunitaria" data-correlativas="introPsico,personalidad,social">Psicología Comunitaria</div>
    <div class="materia" data-id="relacionesHumanas" data-correlativas="social">Psicología de las Relaciones Humanas</div>
    <div class="materia" data-id="etica" data-correlativas="doctrina">Ética Profesional</div>
  </div>
  <!-- AÑO 5 -->
  <div class="año">
    <h2>5º Año</h2>
    <div class="materia" data-id="clinica2" data-correlativas="clinica1,psicodiagnostico">Psicología Clínica II</div>
    <div class="materia" data-id="metodologia2" data-correlativas="psicometria,proj1,proj2">Metodología de la Investigación en Psicología II</div>
    <div class="materia" data-id="organizaciones" data-correlativas="laboral">Psicología de las Organizaciones</div>
    <div class="materia" data-id="forense" data-correlativas="laboral,grupo">Psicología Forense</div>
    <div class="materia" data-id="grupoTerapia" data-correlativas="diversidad,clinica1">Psicoterapia de Grupo</div>
    <div class="materia" data-id="saludPublica" data-correlativas="comunitaria">Salud Pública</div>
    <div class="materia" data-id="tif" data-correlativas="doctrina,teologia1,teologia2,etica,historiaSocio,drogas,psicodiagnostico,comunitaria,relacionesHumanas,clinica1,proj2">Trabajo Integrador Final</div>
    <div class="materia" data-id="ppp-clinica">PPP Clínica</div>
    <div class="materia" data-id="ppp-forense">PPP Forense</div>
    <div class="materia" data-id="ppp-laboral">PPP Laboral</div>
    <div class="materia" data-id="ppp-educacional">PPP Educacional</div>
    <div class="materia" data-id="ppp-comunitaria">PPP Comunitaria</div>
  </div>
</div>
<script>
const estados = ["libre", "cursando", "regular", "finalizada"];
const colores = {
  libre: getComputedStyle(document.documentElement).getPropertyValue("--color-libre").trim(),
  cursando: getComputedStyle(document.documentElement).getPropertyValue("--color-cursando").trim(),
  regular: getComputedStyle(document.documentElement).getPropertyValue("--color-regular").trim(),
  finalizada: getComputedStyle(document.documentElement).getPropertyValue("--color-finalizada").trim()
};
const materias = document.querySelectorAll(".materia");

function guardarEstados() {
  const estadoActual = {};
  materias.forEach(m => estadoActual[m.dataset.id] = m.dataset.estado || "libre");
  localStorage.setItem("estadosMaterias", JSON.stringify(estadoActual));
}
function cargarEstados() {
  const guardados = JSON.parse(localStorage.getItem("estadosMaterias") || "{}");
  materias.forEach(m => {
    const estado = guardados[m.dataset.id] || "libre";
    m.dataset.estado = estado;
    m.style.background = colores[estado];
  });
}
function actualizarBloqueos() {
  const estadosActuales = {};
  materias.forEach(m => estadosActuales[m.dataset.id] = m.dataset.estado || "libre");
  materias.forEach(m => {
    const reqs = (m.dataset.correlativas || "").split(",").filter(Boolean);
    const desbloqueada = reqs.every(id => estadosActuales[id] === "finalizada");
    if (reqs.length && !desbloqueada) m.classList.add("bloqueada");
    else m.classList.remove("bloqueada");
  });
}
materias.forEach(m => {
  m.addEventListener("click", () => {
    const actual = m.dataset.estado || "libre";
    const i = estados.indexOf(actual);
    const siguiente = estados[(i + 1) % estados.length];
    m.dataset.estado = siguiente;
    m.style.background = colores[siguiente];
    guardarEstados();
    actualizarBloqueos();
  });
});
function guardarColores() {
  const inputs = {
    libre: document.getElementById("color-libre").value,
    cursando: document.getElementById("color-cursando").value,
    regular: document.getElementById("color-regular").value,
    finalizada: document.getElementById("color-finalizada").value
  };
  for (let estado in inputs) {
    document.documentElement.style.setProperty(`--color-${estado}`, inputs[estado]);
    colores[estado] = inputs[estado];
  }
  materias.forEach(m => {
    const estado = m.dataset.estado || "libre";
    m.style.background = colores[estado];
  });
  localStorage.setItem("coloresMaterias", JSON.stringify(colores));
}
function cargarColores() {
  const guardados = JSON.parse(localStorage.getItem("coloresMaterias") || "{}");
  for (let estado in guardados) {
    document.documentElement.style.setProperty(`--color-${estado}`, guardados[estado]);
    colores[estado] = guardados[estado];
    const input = document.getElementById(`color-${estado}`);
    if (input) input.value = guardados[estado];
  }
}
window.addEventListener("load", () => {
  cargarColores();
  cargarEstados();
  actualizarBloqueos();
});
</script>
</body>
</html>
